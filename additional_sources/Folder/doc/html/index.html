<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Qml Chess: QmlChess</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li class="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>QmlChess</h1>
<p>
<h3 align="center">1.00 </h3><h2><a class="anchor" name="Introduction">
Introduction</a></h2>
<b>QmlChess</b> is a local multiplayer chess game. It is implemented using Qt + QML. boost and C++11 are not used.<h2><a class="anchor" name="User">
Interface</a></h2>
Once the application starts the Home screen appears. It contains the following elements:<ul>
<li><b>Start</b> button – starts a new game. Leads to the Play screen.</li><li><b>Load</b> button – allows user to load saved game. Leads to the Replay screen.</li><li>Empty chess board</li></ul>
<p>
<div align="center">
<img src="screen1.png" alt="screen1.png">
</div>
<p>
Play screen elements:<ul>
<li><b>Stop</b> button – stops the game and leads to the Home screen.</li><li><b>Save</b> button - saves the game history to a file.</li><li>Chess pieces are on the board (in initial position).</li></ul>
<p>
<div align="center">
<img src="screen2.png" alt="screen2.png">
</div>
<p>
User is able to move the pieces with mouse according to the standard chess rules (click to select the piece, then click on highlighted square to perform the move). Turn by turn rule is followed (white turn - black turn - white - …). Current player is indicated by the rectangle around the King. Castling, check, checkmate, promotion, En passant are not implemented.<p>
Replay screen elements:<ul>
<li><b>Start</b> button – starts a new game. Leads to the Play screen.</li><li><b>Load</b> button - allows user to load saved game. Leads to the Replay screen.</li><li><b>"prev"</b> button - undo the move.</li><li><b>"next"</b> button - redo the move.</li><li>Chess board with pieces.</li></ul>
<p>
<div align="center">
<img src="screen3.png" alt="screen3.png">
</div>
<p>
Application loads a game history and allows to play it step by step using two buttons: “prev” and “next”.<h2><a class="anchor" name="Licenses">
Licenses</a></h2>
Application uses third-party images:<ul>
<li><a href="http://www.fatcow.com/free-icons">http://www.fatcow.com/free-icons</a> (License: <a href="http://creativecommons.org/licenses/by/4.0/">http://creativecommons.org/licenses/by/4.0/</a>).</li><li><a href="https://commons.wikimedia.org/wiki/File:Chess_Pieces_Sprite.svg">https://commons.wikimedia.org/wiki/File:Chess_Pieces_Sprite.svg</a> (License: <a href="https://creativecommons.org/licenses/by-sa/3.0/deed.en">https://creativecommons.org/licenses/by-sa/3.0/deed.en</a>).</li></ul>
<h2><a class="anchor" name="Terminology">
Terminology</a></h2>
<b>Selected</b> square is the square clicked by the user to move piece from it.<p>
<b>Highlighted</b> squares are the possible target squares to move the selected piece.<p>
<b>Row</b> is used instead of <b>rank</b>. Row numbers are changed from 0 to <a class="el" href="chconsts_8h.html#df764cbdea00d65edcd07bb9953ad2b7dfae70a18ce36e10a17556f7e0570947">CH_BOARD_SIZE</a> - 1.<p>
<b>Column</b> is used instead of <b>files</b>. Column numbers are changed from 0 to <a class="el" href="chconsts_8h.html#df764cbdea00d65edcd07bb9953ad2b7dfae70a18ce36e10a17556f7e0570947">CH_BOARD_SIZE</a> - 1.<h2><a class="anchor" name="Architecture">
Architecture</a></h2>
QML <b>ChMainForm.qml</b> pulls data from the model class <a class="el" href="class_ch_board_model.html">ChBoardModel</a>.<p>
<a class="el" href="class_ch_board_model.html">ChBoardModel</a> is configured on startup (in main() function) with players. Player class should implement <a class="el" href="class_ch_player.html">ChPlayer</a> interface. Application uses <a class="el" href="class_ch_human_player.html">ChHumanPlayer</a> class inherited from <a class="el" href="class_ch_player.html">ChPlayer</a>.<p>
Also <a class="el" href="class_ch_board_model.html">ChBoardModel</a> is configured with validator. Validator class should implement <a class="el" href="class_ch_validator.html">ChValidator</a> interface. Application uses <a class="el" href="class_ch_simple_validator.html">ChSimpleValidator</a> class. The same validator is used by players (it is useful for Human player but not mandatory in accordance to <a class="el" href="class_ch_player.html">ChPlayer</a> interface).<p>
<a class="el" href="class_ch_board_model.html">ChBoardModel</a> is inherited from <b>QAbstractListModel</b>. <b>ChBoard.qml</b> uses it as a data model.<p>
Images below explain how <a class="el" href="class_ch_board_model.html" title="Communication point for QML.">ChBoardModel</a> interacts with two Human players.<p>
First image shows the interaction with abstract Player during 2 moves.<p>
<div align="center">
<img src="dfm.png" alt="dfm.png">
</div>
<p>
Second image shows additional interactions specific to Human Player. All ChHumanPlayer-specific connections are esteblished in main() function, <a class="el" href="class_ch_human_player.html">ChHumanPlayer</a> is not used directly in <a class="el" href="class_ch_board_model.html">ChBoardModel</a>.<p>
<div align="center">
<img src="dfm1.png" alt="dfm1.png">
</div>
<p>
Board state is kept in <a class="el" href="class_ch_board_data.html">ChBoardData</a>. <a class="el" href="class_ch_board_model.html">ChBoardModel</a> owns that object. Read-only <a class="el" href="class_ch_board_data.html">ChBoardData</a> is available to players and to validator. Changes in data may be performed only by <a class="el" href="class_ch_board_model.html">ChBoardModel</a>.<p>
Board squares may be referred using <a class="el" href="class_ch_square.html">ChSquare</a> objects. Squares on board are numbered from 0 till (<a class="el" href="chconsts_8h.html#df764cbdea00d65edcd07bb9953ad2b7dfae70a18ce36e10a17556f7e0570947">CH_BOARD_SIZE</a> * CH_BOARD_SIZE - 1) from left to right from bottom to top.<p>
The <a class="el" href="class_ch_piece.html">ChPiece</a> may be located on the square. <a class="el" href="class_ch_piece.html">ChPiece</a> implements pattern <b>FlyWeight</b>, references to pieces are provided by <a class="el" href="class_ch_board_data.html">ChBoardData</a>.<p>
If the user clicks the square with the piece on it to move then the ckicked square is marked as <b>selected</b> and possible target squares are marked as <b>highlighted</b>. Information about selected and highlighted squares is stored in <a class="el" href="class_ch_selection.html">ChSelection</a>. <a class="el" href="class_ch_board_model.html">ChBoardModel</a> owns that object.<p>
All moves are represented as <a class="el" href="class_ch_move_command.html">ChMoveCommand</a> inherited from <b>QUndoCommand</b>, and Replay mode uses <b>QUndoStack</b> to navigate between previous and next moves.<p>
Saved games are stored in XML format. XML Schema validation is performed before game file parsing. Saving and loading are implemented in <a class="el" href="class_ch_game_parser.html">ChGameParser</a> class. It is inherited from <a class="el" href="class_ch_parser_base.html">ChParserBase</a>. <a class="el" href="class_ch_parser_base.html">ChParserBase</a> implements basic XML manipulations (load XML document, save it, validate using XML Schema).<p>
Exceptions may be raised during Save and Load operations. Such exceptions are catched in <a class="el" href="class_ch_board_model.html">ChBoardModel</a>. The reason of the problem is reported to the user and the user may continue to work with the application. All other exceptions mean error in application and are catched in the main() function. Base class for exception is <a class="el" href="class_ch_exception.html">ChException</a>. </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Aug 5 12:24:59 2015 for Qml Chess by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
